<!DOCTYPE html><html lang="zh-TW"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>SLMT's Blog</title><link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="stylesheet" type="text/css" href="/css/syntax-highlight.css"><script src="https://use.fontawesome.com/0bc11e7eba.js"></script></head><body><div id="container"><div id="header"><h1 class="title">SLMT's Blog</h1><div class="pure-g navs"><div class="nav pure-u-1 pure-u-sm-1-4"><a href="/.">Home</a></div><div class="nav pure-u-1 pure-u-sm-1-4"><a href="/archives">Archive</a></div><div class="nav pure-u-1 pure-u-sm-1-4"><a href="/about">About</a></div><div class="nav pure-u-1 pure-u-sm-1-4"><a href="/rss.xml">RSS</a></div></div></div><div id="main"><h1 class="post-large-title">版本編號的命名規則</h1><div class="post-meta"><div class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>2015/07/20</div><div class="post-cats"><i class="fa fa-folder-open" aria-hidden="true"></i><a class="post-cat" href="/categories/programming/">Programming</a>/<a class="post-cat" href="/categories/programming/software-engineering/">Software Engineering</a></div><div class="post-tags"><i class="fa fa-tags" aria-hidden="true"></i><a class="post-tag" href="/tags/dev/">#dev</a><a class="post-tag" href="/tags/version-control/">#version control</a><a class="post-tag" href="/tags/naming-convention/">#naming convention</a></div></div><div class="post-content"><p>最近正在研究如何命名軟體的版本編號，比較符合現在常用的命名方式。當然版本號可以隨意訂，但是使用了一個大家通用的規則的話，其他人也比較容易從版本號上看出了不同版本之間的變化有多大。以下分享我所瞭解到的命名規則。</p>
<a id="more"></a>
<h2 id="命名規則"><a href="#命名規則" class="headerlink" title="命名規則"></a>命名規則</h2><p>首先，在開始分享之前，先提供一份參考文件。基本上我就是遵照這份文件的所定義的規則。</p>
<p>Semantic Versioning: <a href="http://semver.org/" target="_blank" rel="external">http://semver.org/</a></p>
<p>這份文件有提供多種不同的語言供大家閱讀，我看了一下中文的翻譯也沒什麼問題，應該可以安心食用XD</p>
<p>那麼接下來就大致介紹一下主要的規則。</p>
<h3 id="版本編號格式"><a href="#版本編號格式" class="headerlink" title="版本編號格式"></a>版本編號格式</h3><p>版本編號必須要依照以下格式命名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[主版本號].[次版本號].[修訂版本號]</span><br></pre></td></tr></table></figure>
<p>以上每個編號都是 &gt;= 0 的數字，下面就是一個符合規則的版本編號：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.0.3</span><br></pre></td></tr></table></figure>
<p>每次一發佈新版本的時候就遞增其中一個編號。</p>
<h3 id="每個編號遞增的時機"><a href="#每個編號遞增的時機" class="headerlink" title="每個編號遞增的時機"></a>每個編號遞增的時機</h3><ul>
<li>主版本號：軟體有重大更新的時候遞增，重大更新通常是指功能與介面都有大幅度變動的時候。</li>
<li>次版本號：軟體發佈新功能，但是並不會大幅影響到整個軟體的時候遞增。</li>
<li>修訂版本號：通常是在軟體有 bug，發布 bug 的修正版時遞增。</li>
</ul>
<p>有些版本編號除了上述三者之外，還會有「建置版本號」。也就是只要每次建置一次軟體就會遞增一次，有時候甚至會使用建置的日期或時間來代表。不過已經很少人在用了。</p>
<h3 id="版本號的比較"><a href="#版本號的比較" class="headerlink" title="版本號的比較"></a>版本號的比較</h3><p>比較的規則很簡單，就是從最左邊的數字開始比。比較大的就是比較新的版本。</p>
<p>如果數字一樣的話，就比下一個數字。</p>
<p>以下是一個比較的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.0.0 &lt; 1.0.1 &lt; 1.1.0 &lt; 1.2.0 &lt; 1.4.5 &lt; 2.0.0 &lt; 2.1.12 &lt; 2.3.2 &lt; 3.0.0 ...</span><br></pre></td></tr></table></figure>
<h3 id="正式版之前的測試版本編號"><a href="#正式版之前的測試版本編號" class="headerlink" title="正式版之前的測試版本編號"></a>正式版之前的測試版本編號</h3><p>有些軟體在發布正式版本之前，會先發布測試版本給大眾使用。測試版本不保證沒有任何 bug 或者功能完善。</p>
<p>通常測試版的 <code>主版本號</code> 會是 <code>0</code>，例如 <code>0.3.1</code> 就是一個測試版本。</p>
<p>而一般會使用 <code>0.1.0</code> 當作測試版的初始版本號。</p>
<h3 id="提醒"><a href="#提醒" class="headerlink" title="提醒"></a>提醒</h3><p>除了以上規則之外，還有些規則的細節沒有提及。如果有興趣的話可以直接看看最上面提供的文件。</p>
<h2 id="命名範例"><a href="#命名範例" class="headerlink" title="命名範例"></a>命名範例</h2><p>以下分別以「線上遊戲」與「函式庫」兩者為例。</p>
<h3 id="線上遊戲"><a href="#線上遊戲" class="headerlink" title="線上遊戲"></a>線上遊戲</h3><p>假設現在有款 RPG 線上遊戲叫做 <code>小山貓 online</code>，一開始正式發佈的版本號是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.0.0</span><br></pre></td></tr></table></figure>
<p>接著推出一段時間之後，為了增加遊戲的豐富性，新增了一些新的關卡與任務，此時 <code>次版本號</code> 有可能就會遞增：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.1.0</span><br></pre></td></tr></table></figure>
<p>新增了新功能不久，有玩家回報在解任務時會卡住，沒辦法繼續。工程師檢查之下發現是 bug，立即修正。因此發佈了 bug 修正版，<code>修正版本號</code> 遞增：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.1.1</span><br></pre></td></tr></table></figure>
<p>過了一段時間，又發布了新的關卡與任務，因此 <code>次版本號</code> 再度遞增，而 <code>修正版本號</code> 歸零：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.2.0</span><br></pre></td></tr></table></figure>
<p>就這樣持續了一段時間。隨著時間的推進，現有的地圖與故事似乎無法滿足玩家的需求，因此遊戲公司撰寫了新故事與製作了新地圖，推出了 <code>小山貓的遠征之旅</code> 大改版！</p>
<p>這個時候，遊戲出現了重大更新，所以 <code>主版本號</code> 很有可能就會遞增，後面的版本號則歸零：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.0.0</span><br></pre></td></tr></table></figure>
<p>這是一個線上遊戲可能的版本編號命名時機與流程。</p>
<h3 id="函式庫"><a href="#函式庫" class="headerlink" title="函式庫"></a>函式庫</h3><p>函式庫的狀況與遊戲不同，因為使用函式庫的人通常是開發其他程式的工程師，所以版本號遞增的時機也會不太一樣。</p>
<p>假設我寫了一個 <code>小山貓函式庫</code>，只要呼叫一個 <code>catMeow()</code> 這個函式，電腦喇叭就會發出貓咪的叫聲。</p>
<p>而版本編號一開始可能訂為：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.0.0</span><br></pre></td></tr></table></figure>
<p>此時我心血來潮，突然想要新增一個新的函式（新功能），<code>catAnimate()</code> 函式，呼叫之後程式畫面中就會出現貓咪動畫。</p>
<p><code>次版本號</code> 可能就會遞增：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.1.0</span><br></pre></td></tr></table></figure>
<p>我突然接到其他開發者來信，他說他們呼叫了新的 <code>catAnimate()</code> 之後，沒有出現貓，而是出現狗！</p>
<p>這真是太嚴重了！必須要馬上修正這個 bug！因此我發布了一個修訂版本，且遞增了 <code>修訂版本號</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.1.1</span><br></pre></td></tr></table></figure>
<p>過了一段時間之後，我覺得現在這個 API 設計不好，我想用物件導向的方式重寫。</p>
<p>在重寫之後，任何人使用舊的功能之前，必須要先使用 <code>new Cat()</code> 建立一個貓咪物件，然後分別呼叫 <code>cat.meow()</code> 與 <code>cat.animate()</code> 才能使用之前的功能。</p>
<p>這個改變影響到了許多已經寫好程式的開發者，因為他們必須要把所有使用到 <code>小山貓函式庫</code> 的地方全部改成新的寫法。</p>
<p>為了因應這種重大更新，此時必須要遞增 <code>主版本號</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.0.0</span><br></pre></td></tr></table></figure>
<h3 id="小結"><a href="#小結" class="headerlink" title="小結"></a>小結</h3><p>大家應該可以注意到一件事情，通常遊戲的重大更新對玩家來說都是一個令人開心的事件，但是函式庫的重大更新（主版本號遞增）通常對開發者來說就代表著：「Fxxk！程式又要大修了！」</p>
<p>開發者會視情況來決定是否要使用大更新後的函式庫。有很多情況是，開發者仍使用舊的版本（像是 <code>小山貓函式庫</code> 的 <code>1.1.1</code> 版），而只有開發新程式的時候才會使用最新的版本。</p>
<p>例如 OpenGL 某次重大更新之後，大大地修改了繪圖的流程與方式，很多舊的函式都不能呼叫了，因此到現在還是很多人使用舊版。另外像是 Python 3 的更新也改掉了很多語法的使用方式。</p>
<h2 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h2><p>這邊提供的只是一種目前常看到的命名規則。當然要自己定義自己的規則也不是不行，像是直接用發布日期來當版本號，只是其他人就無法使用這種常用的邏輯來判斷版本號的意義。此時最好提供一份文件說明這些版本號的意義。</p>
<p>另外，有些軟體在測試期間，可能會使用不同規則的命名方式。</p>
<p>例如從 <a href="https://mcversions.net/" target="_blank" rel="external">這份下載清單</a> 可以看到， <a href="https://minecraft.net/" target="_blank" rel="external">Minecraft</a> 在測試期間的版本編號，是在前面分別加上 <code>a</code> 代表 alpha 版，加上 <code>b</code> 代表 beta 版。正式版本再使用類似這裡分享的規則來命名。</p>
<p>我個人是建議就遵照最上方文件提供的規則就好，使用一個大多數人都使用的規則並沒有什麼壞處。</p>
</div></div><div id="footer"><p>&copy; Yu-shan Lin (SLMT) and SLMT's Blog, 2016</p></div></div></body></html>